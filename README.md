# 自创语言的词法分析器与语法分析器

## 项目背景

本工程为电子科技大学编译技术试验二的试验记录工程，将整个试验的过程记录，尝试结合软件工程知识与编译技术知识进行开发记录，尝试对自创的类C语言的文法进行词法分析，并进行不构造语法树的语法分析与构造语法树的语法分析

本工程作者共三人，本人(丁志鹏)是工程主负责人。由于队员未加入github，所以项目的更新上交，文档的书写工作由我负责。

若您有兴趣，欢迎与我讨论: [邮箱](QAQddbest@yeah.net)

本人的网站为: [个人博客](https://qaqddbest.github.io)

项目负责人：丁志鹏

队员：黄粤升、王明远

---

## 项目内容

### 词法分析

使用 `flex` 进行词法分析。

`flex` 所依据的表格，请在[种别码表](./documents/种别码表.md)查看。

本词法分析不实现主函数，但提供外部调用接口函数 `lexicallyAnalyse()` ，函数主题内容为

```c
int lexicallyAnalyse(){
    return yylex();
}
```

以供后续扩展。

每次调用 `lexicallyAnalyse()` 都会返回下一个获取的 `token` ，即词法分析与语法分析同时进行。因此，必须保证词法分析绝对正确，才能开始语法分析模块。

### 语法分析

语法表请看：[rd文法表](./documents/rd文法表.txt)

#### 不构建语法树

词法分析器提供`lexicallyAnalyse()`函数，用于更新`nToken`与`nnToken`变量。

提供接口函数`void parsingAnalyse(FILE *);`给`main.c`，并通过调用该函数，传入指向待分析rd源码的文件的指针，自动调用`void initLexer(FILE *lex)`以初始化词法分析器。每次调用`void lexicallyAnalyse()`将更新变量。通过递归下降分析方法，进行语法分析检测。

具体请参看文件[语法分析总括-不构建语法树](./documents/语法分析总括_NoneTree.md)

#### 构建语法树

从不构建语法树的程序更改而来。

最主要的是如何处理多节点结构，本次构建的思路为：

1. 将`TYPE`这些次要信息存入左子数，并构建空节点，用于存储同一缩进的相同结构。

2. 将相同的可类比内容存入第一个内容的`next`指针中

这样子后，输出语法树的规则为：

1. 输出本节点
2. 输出左节点
3. 输出右节点
4. 输出next节点

即非常方便快捷

具体请参看文件[语法分析总括-构建语法树](./documents/语法分析总括_Tree.md)

---

## 开源协议

[MIT License](https://qaqddbest.github.io/MIT.html)

